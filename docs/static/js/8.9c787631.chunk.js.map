{"version":3,"sources":["playlists/playlists.component.tsx"],"names":["Playlists","props","state","storedPlaylists","localStorage","getItem","playlists","JSON","parse","length","selectedPlaylist","undefined","window","onbeforeunload","onBeforeUnloadCallback","this","saveChanges","playlist","Id","Math","max","apply","map","p","Name","Videos","newPlaylists","push","setState","playlistId","filter","removeState","v","VideoId","StartTime","EndTime","Delay","videoId","e","index","propertyName","target","value","playlistIndex","videoIndex","setItem","stringify","parseInt","location","action","obj","expression","res","Object","keys","k","result","provided","destination","videos","reorder","source","list","startIndex","endIndex","Array","from","splice","removed","element","variant","style","margin","padding","marginBottom","id","label","defaultValue","onChange","handlePlaylistChange","nameof","width","color","onClick","addVideo","className","removePlaylist","onDragEnd","droppableId","direction","snapshot","droppableProps","ref","innerRef","video","draggableId","toString","draggableProps","background","isDragging","display","flexWrap","data-testid","height","marginRight","dragHandleProps","maxHeight","alt","src","handleVideoChange","type","inputProps","min","inputMode","pattern","alignSelf","removeVideo","placeholder","when","message","promptMessageCallback","displayEmpty","renderValue","handlePlaylistDropdownChange","addPlaylist","Component"],"mappings":"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","file":"static/js/8.9c787631.chunk.js","sourcesContent":["import { Component } from \"react\";\r\nimport { Playlist } from \"./playlist.model\";\r\nimport { Prompt } from \"react-router\";\r\nimport * as H from 'history';\r\nimport { Video } from \"./video.model\";\r\nimport { Button, Card, CardContent, MenuItem, Paper, Select, SelectChangeEvent, TextField } from \"@mui/material\";\r\nimport { DragDropContext, Draggable, Droppable, DropResult, ResponderProvided } from \"react-beautiful-dnd\";\r\nimport DragHandleIcon from '@mui/icons-material/DragHandle';\r\n\r\nexport interface PlaylistProps {\r\n}\r\n\r\nexport interface PlaylistState {\r\n    playlists: Playlist[];\r\n    selectedPlaylist: number | undefined;\r\n}\r\n\r\nclass Playlists extends Component<PlaylistProps, PlaylistState> {\r\n\r\n    state: PlaylistState;\r\n\r\n    constructor(props: PlaylistProps) {\r\n        super(props);\r\n\r\n        const storedPlaylists = localStorage.getItem(\"Playlists\");\r\n\r\n        let playlists = storedPlaylists !== null ? JSON.parse(storedPlaylists) : [];\r\n\r\n        if (playlists.length === 0) {\r\n            playlists = JSON.parse(\"[{\\\"Id\\\":1,\\\"Name\\\":\\\"ACâš¡DC Fingerbreaker I\\\",\\\"Videos\\\":[{\\\"Id\\\":1,\\\"Name\\\":\\\"Jailbreak\\\",\\\"VideoId\\\":\\\"HRo2m6RYJpI\\\",\\\"StartTime\\\":\\\"20\\\",\\\"EndTime\\\":\\\"53\\\",\\\"Delay\\\":0},{\\\"Id\\\":2,\\\"Name\\\":\\\"Soul Stripper\\\",\\\"VideoId\\\":\\\"Sn6bfNFUSU0\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"155\\\",\\\"Delay\\\":0},{\\\"Id\\\":3,\\\"Name\\\":\\\"Live Wire\\\",\\\"VideoId\\\":\\\"1gtLgAYCf5Y\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"95\\\",\\\"Delay\\\":0},{\\\"Id\\\":4,\\\"Name\\\":\\\"Let There Be Rock\\\",\\\"VideoId\\\":\\\"OvJrJcVAQQs\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"63\\\",\\\"Delay\\\":0},{\\\"Id\\\":5,\\\"Name\\\":\\\"Who Made Who\\\",\\\"VideoId\\\":\\\"PiZHNw1MtzI\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"205\\\",\\\"Delay\\\":0},{\\\"Id\\\":6,\\\"Name\\\":\\\"Thunderstruck\\\",\\\"VideoId\\\":\\\"v2AC41dglnM\\\",\\\"StartTime\\\":\\\"36\\\",\\\"EndTime\\\":\\\"192\\\",\\\"Delay\\\":0},{\\\"Id\\\":7,\\\"Name\\\":\\\"Dirty Deeds Done Dirt Cheap\\\",\\\"VideoId\\\":\\\"UIE4UjBtx-o\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"60\\\",\\\"Delay\\\":0},{\\\"Id\\\":8,\\\"Name\\\":\\\"Heatseeker\\\",\\\"VideoId\\\":\\\"VWG4-4Y6Z60\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"75\\\",\\\"Delay\\\":0},{\\\"Id\\\":9,\\\"Name\\\":\\\"War Machine\\\",\\\"VideoId\\\":\\\"0W2kXsQ5ZYc\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"53\\\",\\\"Delay\\\":0},{\\\"Id\\\":10,\\\"Name\\\":\\\"Riff Raff\\\",\\\"VideoId\\\":\\\"7S69xWkV4uM\\\",\\\"StartTime\\\":\\\"44\\\",\\\"EndTime\\\":\\\"121\\\",\\\"Delay\\\":0},{\\\"Id\\\":11,\\\"Name\\\":\\\"Shot Down In Flames\\\",\\\"VideoId\\\":\\\"UKwVvSleM6w\\\",\\\"StartTime\\\":\\\"15\\\",\\\"EndTime\\\":\\\"52\\\",\\\"Delay\\\":0},{\\\"Id\\\":12,\\\"Name\\\":\\\"If You Want Blood(You've Got It)\\\",\\\"VideoId\\\":\\\"6EWqTym2cQU\\\",\\\"StartTime\\\":\\\"35\\\",\\\"EndTime\\\":\\\"70\\\",\\\"Delay\\\":0},{\\\"Id\\\":13,\\\"Name\\\":\\\"Shoot To Thrill\\\",\\\"VideoId\\\":\\\"LIzPbnIp2QM\\\",\\\"StartTime\\\":\\\"12\\\",\\\"EndTime\\\":\\\"83\\\",\\\"Delay\\\":0},{\\\"Id\\\":14,\\\"Name\\\":\\\"Chase The Ace\\\",\\\"VideoId\\\":\\\"oYw-ZTLqIpg\\\",\\\"StartTime\\\":0,\\\"EndTime\\\":\\\"181\\\",\\\"Delay\\\":0}]}]\");\r\n        }\r\n\r\n        let selectedPlaylist = undefined;\r\n\r\n        // show the first playlist if there are any\r\n        if (playlists.length > 0) {\r\n            selectedPlaylist = 0;\r\n        }\r\n\r\n        this.state = {\r\n            playlists: playlists,\r\n            selectedPlaylist: selectedPlaylist\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.onbeforeunload = () => { return this.onBeforeUnloadCallback(); };\r\n    }\r\n\r\n    onBeforeUnloadCallback(): string {\r\n        this.saveChanges();\r\n\r\n        return '';\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.onbeforeunload = null;\r\n    }\r\n\r\n    addPlaylist(): void {\r\n\r\n        let playlist = {\r\n            Id: this.state.playlists.length > 0 ? Math.max.apply(Math, this.state.playlists.map((p) => { return p.Id })) + 1 : 1,\r\n            Name: '',\r\n            Videos: []\r\n        };\r\n\r\n        let newPlaylists = [...this.state.playlists];\r\n\r\n        newPlaylists.push(playlist);\r\n\r\n        this.setState({\r\n            playlists: newPlaylists,\r\n            selectedPlaylist: newPlaylists.length - 1 // move to the new playlist\r\n        });\r\n    }\r\n\r\n    removePlaylist(playlistId: number): void {\r\n        let newPlaylists = [...this.state.playlists];\r\n        newPlaylists = newPlaylists.filter(p => p.Id !== playlistId);\r\n\r\n        let playlist = this.state.playlists[this.state.selectedPlaylist!];\r\n\r\n        // if you're on the playlist, remove the state and show empty\r\n        let removeState = playlist.Id === playlistId;\r\n\r\n        this.setState({\r\n            playlists: newPlaylists,\r\n            selectedPlaylist: removeState ? undefined : (this.state.selectedPlaylist! > newPlaylists.length - 1 ? newPlaylists.length - 1 : this.state.selectedPlaylist)\r\n        });\r\n    }\r\n\r\n    addVideo(playlistId: number): void {\r\n        const newPlaylists = [...this.state.playlists];\r\n        let selectedPlaylist = newPlaylists.filter((p) => p.Id === playlistId)[0];\r\n\r\n        selectedPlaylist.Videos.push({\r\n            Id: selectedPlaylist.Videos.length > 0 ? Math.max.apply(Math, selectedPlaylist.Videos.map((v) => { return v.Id })) + 1 : 1,\r\n            Name: '',\r\n            VideoId: '',\r\n            StartTime: 0,\r\n            EndTime: 0,\r\n            Delay: 0\r\n        });\r\n\r\n        this.setState({\r\n            playlists: newPlaylists\r\n        });\r\n    }\r\n\r\n    removeVideo(playlistId: number, videoId: number): void {\r\n        const newPlaylists = [...this.state.playlists];\r\n\r\n        let selectedPlaylist = newPlaylists.filter((p) => p.Id === playlistId)[0];\r\n\r\n        selectedPlaylist.Videos = selectedPlaylist.Videos.filter(v => v.Id !== videoId);\r\n\r\n        this.setState({\r\n            playlists: newPlaylists\r\n        });\r\n    }\r\n\r\n    handlePlaylistChange(e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, index: number, propertyName: string): void {\r\n        const newPlaylists = [...this.state.playlists];\r\n\r\n        newPlaylists[index][propertyName] = e.target.value;\r\n\r\n        this.setState({\r\n            playlists: newPlaylists\r\n        });\r\n    }\r\n\r\n    handleVideoChange(e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>, playlistIndex: number, videoIndex: number, propertyName: string): void {\r\n        const newPlaylists = [...this.state.playlists];\r\n\r\n        newPlaylists[playlistIndex].Videos[videoIndex][propertyName] = e.target.value;\r\n\r\n        this.setState({\r\n            playlists: newPlaylists\r\n        });\r\n    }\r\n\r\n    saveChanges(): void {\r\n        localStorage.setItem(\"Playlists\", JSON.stringify(this.state.playlists));\r\n    }\r\n\r\n    handlePlaylistDropdownChange(e: any): void {\r\n\r\n        // save automatically when changing drop down\r\n        this.saveChanges();\r\n\r\n        this.setState({\r\n            selectedPlaylist: parseInt(e.target.value)\r\n        });\r\n    }\r\n\r\n    promptMessageCallback(location: H.Location, action: H.Action): string | boolean {\r\n        // save when navigating away\r\n        this.saveChanges();\r\n\r\n        // good to transition after\r\n        return true;\r\n    }\r\n\r\n    nameof<T>(obj: T, expression: Function): string {\r\n        const res: any = {};\r\n\r\n        Object.keys(obj).map(k => res[k] = () => k);\r\n\r\n        let result = expression(res)();\r\n\r\n        return result;\r\n    }\r\n\r\n    onDragEnd(result: DropResult, provided: ResponderProvided): void {\r\n        let playlists = [...this.state.playlists];\r\n\r\n        // dropped outside the list\r\n        if (result.destination) {\r\n            const videos = this.reorder(\r\n                this.state.playlists[this.state.selectedPlaylist!].Videos,\r\n                result.source.index,\r\n                result.destination.index\r\n            );\r\n\r\n\r\n            playlists[this.state.selectedPlaylist!].Videos = videos;\r\n        }\r\n\r\n\r\n        this.setState({\r\n            playlists: playlists\r\n        });\r\n    }\r\n\r\n    reorder(list: any[], startIndex: number, endIndex: number) {\r\n        const result = Array.from(list);\r\n        const [removed] = result.splice(startIndex, 1);\r\n        result.splice(endIndex, 0, removed);\r\n\r\n        return result;\r\n    };\r\n\r\n    render() {\r\n\r\n        let element: JSX.Element | undefined = undefined;\r\n\r\n        if (this.state.selectedPlaylist !== undefined) {\r\n            let playlist = this.state.playlists[this.state.selectedPlaylist];\r\n            let playlistIndex = this.state.selectedPlaylist;\r\n            element = (\r\n                <Card variant=\"outlined\" style={{ margin: '12px', padding: '0 !important' }} key={playlist.Id}>\r\n                    <CardContent style={{ padding: '0 !important' }}>\r\n                        <div>\r\n                            <div style={{ marginBottom: '12px' }}>\r\n                                <TextField id=\"playlist-name-text-field\" label=\"Playlist Name\" defaultValue={playlist?.Name} onChange={e => this.handlePlaylistChange(e, playlistIndex, this.nameof(playlist, (p: Playlist) => p.Name))} style={{ width: \"400px\", \"marginRight\": \"12px\" }} />\r\n                                <Button id=\"add-video-button\" variant=\"contained\" color=\"primary\" onClick={() => { this.addVideo(playlist.Id) }} style={{ 'marginTop': \"12px\", \"marginRight\": '12px' }}>\r\n                                    Add Video\r\n                                </Button>\r\n                                <Button className=\"remove-playlist-button\" id={\"remove-playlist-\" + playlist.Id + \"-button\"} variant=\"contained\" color=\"secondary\" onClick={() => { this.removePlaylist(playlist.Id) }} style={{ 'marginTop': \"12px\" }}>\r\n                                    Remove Playlist\r\n                                </Button>\r\n                            </div>\r\n                            <DragDropContext\r\n                                onDragEnd={(result: DropResult, provided: ResponderProvided) => this.onDragEnd(result, provided)}>\r\n                                <Droppable droppableId=\"droppable\" direction=\"vertical\">\r\n                                    {(provided, snapshot) => (\r\n                                        <div {...provided.droppableProps} ref={provided.innerRef}>\r\n                                            {\r\n                                                playlist.Videos.map((video, videoIndex) => {\r\n                                                    return (\r\n                                                        <Draggable key={video.Id} draggableId={video.Id.toString()} index={videoIndex}>\r\n                                                            {\r\n                                                                (provided, snapshot) => {\r\n                                                                    return (\r\n                                                                        <div\r\n                                                                            ref={provided.innerRef}\r\n                                                                            {...provided.draggableProps}\r\n                                                                            {...provided.draggableProps.style}\r\n                                                                        >\r\n                                                                            <Card variant=\"outlined\" style={{ \"padding\": \"12px\", background: snapshot.isDragging ? 'lightgreen' : '#fff' }} key={video.Id}>\r\n                                                                                <CardContent>\r\n                                                                                    <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n                                                                                        <Paper data-testid=\"video-item\" id={\"drag-handle-video-\" + video.Id} style={{ width: '24px', display: 'inline-block', height: '45px', marginRight: '12px' }} {...provided.dragHandleProps}>\r\n                                                                                            <DragHandleIcon color=\"primary\" style={{ height: '45px', maxHeight: '45px' }} />\r\n                                                                                        </Paper>\r\n                                                                                        <img alt={video.Name} src={\"https://img.youtube.com/vi/\" + video.VideoId + \"/hqdefault.jpg\"} style={{ width: '80x', height: '45px', \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <TextField id={\"video-\" + video.Id + \"-name-text-field\"} label=\"Video Name\" defaultValue={video.Name} onChange={e => this.handleVideoChange(e, playlistIndex, videoIndex, this.nameof(video, (v: Video) => v.Name))} style={{ \"width\": \"200px\", \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <TextField id={\"video-\" + video.Id + \"-video-id-text-field\"} label=\"Video VideoId\" defaultValue={video.VideoId} onChange={e => this.handleVideoChange(e, playlistIndex, videoIndex, this.nameof(video, (v: Video) => v.VideoId))} style={{ \"width\": \"200px\", \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <TextField id={\"video-\" + video.Id + \"-start-time-text-field\"} type=\"number\" inputProps={{ min: 0, inputMode: 'numeric', pattern: '[0-9]*' }} label=\"Video StartTime\" defaultValue={video.StartTime} onChange={e => this.handleVideoChange(e, playlistIndex, videoIndex, this.nameof(video, (v: Video) => v.StartTime))} style={{ \"width\": \"200px\", \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <TextField id={\"video-\" + video.Id + \"-end-time-text-field\"} type=\"number\" inputProps={{ min: 0, inputMode: 'numeric', pattern: '[0-9]*' }} label=\"Video EndTime\" defaultValue={video.EndTime} onChange={e => this.handleVideoChange(e, playlistIndex, videoIndex, this.nameof(video, (v: Video) => v.EndTime))} style={{ \"width\": \"200px\", \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <TextField id={\"video-\" + video.Id + \"-delay-text-field\"} type=\"number\" inputProps={{ min: 0, inputMode: 'numeric', pattern: '[0-9]*' }} label=\"Video Delay\" defaultValue={video.Delay} onChange={e => this.handleVideoChange(e, playlistIndex, videoIndex, this.nameof(video, (v: Video) => v.Delay))} style={{ \"width\": \"200px\", \"marginRight\": \"12px\", marginBottom: '12px' }} />\r\n                                                                                        <div style={{ alignSelf: 'center' }}>\r\n                                                                                            <Button id={\"remove-video-\" + video.Id + \"-button\"} variant=\"contained\" color=\"secondary\" onClick={() => { this.removeVideo(playlist.Id, video.Id) }}>\r\n                                                                                                Remove Video\r\n                                                                                            </Button>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                </CardContent>\r\n                                                                            </Card>\r\n                                                                        </div>\r\n                                                                    );\r\n                                                                }\r\n                                                            }\r\n                                                        </Draggable>\r\n                                                    );\r\n                                                })\r\n                                            }\r\n                                            {provided.placeholder}\r\n                                        </div>\r\n                                    )}\r\n                                </Droppable>\r\n                            </DragDropContext>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <Prompt\r\n                    when={true}\r\n                    message={(location, action) => this.promptMessageCallback(location, action)}\r\n                />\r\n                <Card variant=\"outlined\" style={{ margin: '12px' }}>\r\n                    <CardContent>\r\n\r\n                        <h2>Playlists</h2>\r\n                        <div style={{ display: 'flex', flexWrap: 'wrap' }}>\r\n\r\n                        </div>\r\n                        <Select\r\n                            label=\"Playlists\"\r\n                            id=\"playlist-dropdown\"\r\n                            displayEmpty\r\n                            renderValue={this.state.selectedPlaylist !== undefined ? () => this.state.playlists[this.state.selectedPlaylist!].Name : () => 'Playlists'}\r\n                            defaultValue=\"Playlists\"\r\n                            onChange={(e: SelectChangeEvent) => this.handlePlaylistDropdownChange(e)}\r\n                            style={{ marginRight: '24px', 'minWidth': '200px', marginBottom: '12px' }}>\r\n                            {\r\n                                this.state.playlists.map((playlist, playlistIndex) => {\r\n                                    return (\r\n                                        <MenuItem key={playlist.Id} value={playlistIndex}>#{playlist.Id}: {playlist.Name}</MenuItem>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </Select>\r\n                        <Button id=\"add-new-playlist-button\" variant=\"contained\" color=\"primary\" onClick={() => { this.addPlaylist() }} style={{ marginRight: '12px' }}>\r\n                            Add New Playlist\r\n                        </Button>\r\n                        <Button id=\"save-changes-button\" variant=\"contained\" color=\"primary\" onClick={() => { this.saveChanges() }} style={{ marginRight: '12px' }}>\r\n                            Save Changes\r\n                        </Button>\r\n                    </CardContent>\r\n                </Card>\r\n                {/* Template for each playlist */}\r\n                {element}\r\n            </div>\r\n        );\r\n    };\r\n};\r\n\r\nexport default Playlists;"],"sourceRoot":""}